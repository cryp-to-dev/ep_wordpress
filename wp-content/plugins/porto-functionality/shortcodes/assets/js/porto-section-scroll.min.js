(function(e,t){"use strict";e=e||{};var o=function(e,t){return this.initialize(e,t)};o.defaults={targetClass:".section-scroll",dotsNav:!0},o.prototype={initialize:function(e,t){return e.data("__sectionScroll")?this:(this.$el=e,this.setData().setOptions(t).build().events(),this)},setData:function(){return this.$el.data("__sectionScroll",this),this},setOptions:function(e){return this.options=t.extend(!0,{},o.defaults,e,{wrapper:this.$el}),this},build:function(){var e=this;this.options.wrapper;e.$header=t("#header"),t("html").addClass("overflow-hidden"),e.updateSectionsHeight(),t(this.options.targetClass).wrap('<div class="section-wrapper"></div>'),t(".section-wrapper").each(function(){t(this).height(t(this).find(".section-scroll").outerHeight())}),t(".section-wrapper").first().addClass("active");var o,n,i=!1,s=!1,a="",c=0,r=0;"ontouchstart"in window||navigator.msMaxTouchPoints?(document.addEventListener("touchstart",function(e){c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0].screenY:e.touches[0].screenY}),n="onwheel"in document?"wheel touchend":void 0!==document.onmousewheel?"mousewheel touchend":"DOMMouseScroll touchend"):(n="onwheel"in document?"wheel pointerup":void 0!==document.onmousewheel?"mousewheel pointerup":"DOMMouseScroll pointerup",document.addEventListener("pointerdown",function(e){"touch"==e.pointerType&&(c=e.screenY)}));var l=function(n){if(!t(".porto-popup-menu.opened").length){var l=void 0==n.wheelDelta?n.deltaY>0:n.wheelDelta<0;if(n.type&&("touchend"==n.type||"pointerup"==n.type)){if("touchend"==n.type)r=event.changedTouches&&event.changedTouches.length?event.changedTouches[0].screenY:event.touches[0].screenY;else{if("touch"!=n.pointerType||!n.screenY)return;r=n.screenY}if(r<=c-20)a="up";else{if(!(r>=c+20))return;a="down"}}var h=t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll"),d=e.getNextSection(l,a);if(o&&clearTimeout(o),o=setTimeout(function(){t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").hasClass("section-scroll-scrollable")?t("html").removeClass("overflow-hidden"):t("html").addClass("overflow-hidden")},1200),!h.hasClass("section-scroll-scrollable")||i||s){if(!i&&!s){if(l||"up"==a){if(e.getCurrentIndex()==t(".section-wrapper").length-1)return;e.changeSectionActiveState(d),setTimeout(function(){e.moveTo(d.offset().top)},150)}else{if(0==e.getCurrentIndex())return;e.changeSectionActiveState(d),d.height()>t(window).height()?e.moveTo(h.offset().top-t(window).height()):setTimeout(function(){e.moveTo(d.offset().top)},150)}e.changeDotsActiveState(),e.$header.css({opacity:0,transition:"ease opacity 500ms"}),d.css({position:"relative",opacity:1,"z-index":1,transform:"translate3d(0,0,0) scale(1)"}),h.css({position:"fixed",width:"100%",top:0,left:0,opacity:0,"z-index":0,transform:"translate3d(0,0,-10px) scale(0.7)",transition:"ease transform 600ms, ease opacity 600ms"});var u=parseInt(h.css("marginLeft"),10)+parseInt(h.css("marginRight"),10);u<0&&h.css("width","calc(100% + "+-1*u+"px)"),setTimeout(function(){h.css({position:"relative",opacity:1,transform:"translate3d(0,0,-10px) scale(1)"}),e.$header.css({opacity:1}),e.$header.trigger("porto_section_scroll_scrolled",[e.getCurrentIndex()]),setTimeout(function(){i=!1},500)},1e3),i=!0}}else{if(l||"up"==a){if(d.length&&t(window).scrollTop()+t(window).height()>=d.offset().top){if(i=!0,setTimeout(function(){setTimeout(function(){i=!1},500)},1e3),e.getCurrentIndex()==t(".section-wrapper").length-1)return!1;e.moveTo(h.offset().top+h.outerHeight()),e.changeSectionActiveState(d),e.$header.css({opacity:0,transition:"ease opacity 500ms"})}if(!t("html").hasClass("touch"))for(p=1;p<100;p++)if(t("body, html").scrollTop(t(window).scrollTop()+1),t(window).scrollTop()+t(window).height()>=d.offset().top){s=!0,setTimeout(function(){s=!1},500);break}}else{if(t(window).scrollTop()<=h.offset().top){if(i=!0,setTimeout(function(){setTimeout(function(){i=!1},500)},1e3),0==e.getCurrentIndex())return!1;e.moveTo(h.offset().top-t(window).height()),e.changeSectionActiveState(d),e.$header.css({opacity:0,transition:"ease opacity 500ms"})}if(!t("html").hasClass("touch"))for(var p=1;p<100;p++)if(t("body, html").scrollTop(t(window).scrollTop()-1),t(window).scrollTop()<=h.offset().top){s=!0,setTimeout(function(){s=!1},500);break}}e.changeDotsActiveState()}}};return n.split(" ").forEach(function(e){document.addEventListener(e,l)}),this.options.dotsNav&&e.dotsNavigation(),setTimeout(function(){if(t(window.location.hash).get(0))e.moveTo(t(window.location.hash).parent().offset().top),e.changeSectionActiveState(t(window.location.hash)),e.changeDotsActiveState(),e.updateHash(!0);else{var o=window.location.hash,n=o.replace("#","");o||(n=1),e.moveTo(t(".section-wrapper").eq(n-1).offset().top),e.changeSectionActiveState(t(".section-wrapper").eq(n-1).find(".section-scroll")),e.changeDotsActiveState(),e.updateHash(!0)}t(window).trigger("section.scroll.ready"),e.$header.trigger("porto_section_scroll_scrolled",[e.getCurrentIndex()])},500),this},updateSectionsHeight:function(){return t(".section-scroll").each(function(){t(this).outerHeight()<t(window).height()+3?t(this).css({height:"100vh"}):t(this).addClass("section-scroll-scrollable")}),t(".section-wrapper").each(function(){t(this).height(t(this).find(".section-scroll").outerHeight())}),this},updateHash:function(e){if(window.location.hash){if(!e){var t=this.getCurrentIndex()+1;window.location.hash=t}}else window.location.hash=1;return this},getCurrentIndex:function(){var e=0;return t(".section-wrapper").each(function(o){if(t(this).hasClass("active"))return e=o}),e},moveTo:function(e,o){var n=this;return t("body, html").animate({scrollTop:e},1e3,"easeOutQuint"),setTimeout(function(){n.updateHash()},500),this},getNextSection:function(e,o){return e||"up"==o?t(".section-wrapper").eq(this.getCurrentIndex()+1).children().eq(0):t(".section-wrapper").eq(this.getCurrentIndex()-1).children().eq(0)},changeSectionActiveState:function(e){return t(".section-wrapper").removeClass("active"),e.parent().addClass("active"),this},changeDotsActiveState:function(){return t(".section-scroll-dots-navigation > ul > li").removeClass("active"),t(".section-scroll-dots-navigation > ul > li").eq(this.getCurrentIndex()).addClass("active"),this},dotsNavigation:function(){var e=this,o=t('<div class="section-scroll-dots-navigation"><ul class="list list-unstyled"></ul></div>'),n=e.getCurrentIndex();e.options.dotsClass&&o.addClass(e.options.dotsClass);for(var i=0;i<t(".section-scroll").length;i++){var s=t(".section-wrapper").eq(i).find(".section-scroll").data("section-scroll-title");o.find("> ul").append("<li"+(n==i?' class="active"':"")+'><a href="#'+i+'" data-nav-id="'+i+'"><span>'+s+"</span></a></li>")}return t(".page-wrapper").append(o),o.find("a[data-nav-id]").on("click touchstart",function(o){o.preventDefault();var n=t(this);t(".section-scroll").css({opacity:0,transition:"ease opacity 300ms"}),e.$header.css({opacity:0,transition:"ease opacity 500ms"}),setTimeout(function(){e.moveTo(t(".section-wrapper").eq(n.data("nav-id")).offset().top),t(".section-wrapper").removeClass("active"),t(".section-wrapper").eq(n.data("nav-id")).addClass("active"),t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").css({opacity:1}),setTimeout(function(){t(".section-scroll").css({opacity:1}),e.$header.css({opacity:1}),e.$header.trigger("porto_section_scroll_scrolled",[e.getCurrentIndex()])},500),e.changeDotsActiveState()},500)}),this},events:function(){var e=this;return t(window).on("section.scroll.ready",function(){t(window).scrollTop(0)}),t(document).ready(function(){t(window).smartresize(function(){e.updateSectionsHeight()})}),this}},t.extend(e,{PluginSectionScroll:o}),t.fn.themePluginSectionScroll=function(e){return this.map(function(){var n=t(this);return n.data("__sectionScroll")?n.data("__sectionScroll"):new o(n,e)})}}).apply(this,[window.theme,jQuery]);